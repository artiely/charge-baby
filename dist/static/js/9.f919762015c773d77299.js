webpackJsonp([9],{l5Ru:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),o=a("Xxa5"),i=a.n(o),l=a("exGp"),s=a.n(l),c=[{title:"设备id",key:"code",dataIndex:"code",scopedSlots:{customRender:"code"}},{key:"created_at",title:"入住时间",dataIndex:"created_at",width:150},{key:"type.name",title:"设备类型",dataIndex:"type.name"},{key:"box_status_cn",title:"运行状态",dataIndex:"box_status_cn[0]",scopedSlots:{customRender:"box_status_cn"},width:100},{key:"status",title:"机柜状态",dataIndex:"status",scopedSlots:{customRender:"status"},width:100},{key:"unit_price",title:"单价/小时(元)",dataIndex:"unit_price",width:100},{key:"upper_price",title:"单次最高收费(元)",dataIndex:"upper_price",width:150},{key:"store.name",title:"所属商户",dataIndex:"store.name"},{key:"qrcode",title:"二维码",dataIndex:"qrcode",scopedSlots:{customRender:"qrcode"}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:100,fixed:"right"}],u={mixins:[a("H8JJ").a],data:function(){return{columns:c,boxtype:null,status:!0,labelCol:{span:7},wrapperCol:{span:17}}},watch:{row:{handler:function(t){t&&(this.status=1===t.status)},deep:!0}},methods:{fetch:function(){return"BOX_LIST"},editFetch:function(){return"BOX_PUT_POST"},boxtypeList:function(){var t=this;return s()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.BOXTYPE_LIST({page:1,limit:100});case 2:a=e.sent,t.boxtype=a.data;case 4:case"end":return e.stop()}},e,t)}))()},handleSubmit:function(){var t=this;this.form.validateFields(function(e,a){var r=n()({id:t.row.id},a,{status:t.status?1:0});e||t.save(r)})}},created:function(){this.boxtypeList()}},d={render:function(){var t=this,e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("a-card",[r("div",{attrs:{slot:"title"},slot:"title"},[r("a-input-search",{staticStyle:{width:"400px"},attrs:{placeholder:"商户名/设备类型",enterButton:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),r("a-range-picker",{staticClass:"pull-right",attrs:{format:"YYYY-MM-DD"},on:{change:e.timeChange}})],1),e._v(" "),r("a-table",{attrs:{columns:e.columns,size:"middle",dataSource:e.data,pagination:!1,loading:e.loading,scroll:{x:e.scrollX}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"created_at",fn:function(t,a){return[r("a",{attrs:{href:"#"}},[e._v(e._s(a.mobile)+" - "+e._s(a.name))])]}},{key:"status",fn:function(t,a){return[1==t?r("a-tag",{attrs:{color:"#87d068"}},[e._v("启用")]):e._e(),e._v(" "),0==t?r("a-tag",{attrs:{color:"#f50"}},[e._v("停用")]):e._e()]}},{key:"box_status_cn",fn:function(t,a){return e._l(a.box_status_cn,function(t,a){return r("span",{key:a},["正常"==t?r("a-tag",{attrs:{color:"green"}},[e._v("正常")]):e._e(),e._v(" "),"机柜已空"==t?r("a-tag",{attrs:{color:"pink"}},[e._v("机柜已空")]):e._e(),e._v(" "),"充电宝弹出卡死"==t?r("a-tag",{attrs:{color:"pink"}},[e._v("充电宝弹出卡死")]):e._e(),e._v(" "),"充电宝电量低于标准值"==t?r("a-tag",{attrs:{color:"orange"}},[e._v("充电宝电量低于标准值")]):e._e(),e._v(" "),"充电宝损坏"==t?r("a-tag",{attrs:{color:"green"}},[e._v("充电宝损坏")]):e._e(),e._v(" "),"充电宝丢失"==t?r("a-tag",{attrs:{color:"cyan"}},[e._v("充电宝丢失")]):e._e(),e._v(" "),"系统复位"==t?r("a-tag",{attrs:{color:"blue"}},[e._v("系统复位")]):e._e(),e._v(" "),"新插入充电宝"==t?r("a-tag",{attrs:{color:"purple"}},[e._v("新插入充电宝")]):e._e()],1)})}},{key:"qrcode",fn:function(t,a){return[r("a",{attrs:{href:a.qrcode,target:"_block"}},[r("a-icon",{attrs:{type:"qrcode"}}),e._v(" 点击查看\n        ")],1)]}},{key:"operation",fn:function(t,a){return[r("a",{on:{click:function(t){e.edit(a)}}},[e._v("编辑")])]}}])}),e._v(" "),e.last_page>1?r("a-pagination",{staticStyle:{"margin-top":"6px"},attrs:{defaultCurrent:1,total:e.total},on:{change:e.onChange}}):e._e()],1),e._v(" "),r("a-modal",{attrs:{title:e.title,footer:null},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("a-form",{attrs:{autoFormCreate:function(e){t.form=e}},on:{submit:e.handleSubmit}},[r("a-form-item",{attrs:{required:"",label:"设备类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol,fieldDecoratorId:"type_id",fieldDecoratorOptions:{initialValue:e.row.type_id}}},[r("a-select",e._l(e.boxtype,function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("a-form-item",{attrs:{label:"单价/元",labelCol:e.labelCol,wrapperCol:e.wrapperCol,fieldDecoratorId:"unit_price",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入商户密码"}],initialValue:e.row.unit_price}}},[r("a-input",{attrs:{type:"number"}})],1),e._v(" "),r("a-form-item",{attrs:{required:"",label:"单次最高收费/元",labelCol:e.labelCol,wrapperCol:e.wrapperCol,fieldDecoratorId:"upper_price",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入商户地址"}],initialValue:e.row.upper_price}}},[r("a-input",{attrs:{type:"number"}})],1),e._v(" "),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"机柜状态",fieldDecoratorId:"status"}},[r("a-switch",{attrs:{checkedChildren:"已启用",unCheckedChildren:"已停用"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1),e._v(" "),r("a-form-item",{attrs:{wrapperCol:{span:19,offset:5}}},[r("a-button",{staticStyle:{width:"120px","margin-right":"10px"},attrs:{type:"dashed",size:"large"},on:{click:function(t){e.visible=!1}}},[e._v("\n          取消\n        ")]),e._v(" "),r("a-button",{staticStyle:{width:"120px"},attrs:{type:"primary",htmlType:"submit",size:"large"}},[e._v("\n          保存\n        ")])],1)],1)],1)],1)},staticRenderFns:[]},p=a("VU/8")(u,d,!1,null,null,null);e.default=p.exports}});
//# sourceMappingURL=9.f919762015c773d77299.js.map